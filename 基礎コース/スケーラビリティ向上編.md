
# 可用性、スケーラビリティとは何か
## 可用性
システム全体が障害で停止することなく、サービスを提供し続けることができる能力

## スケーラビリティ
システムの規模の変化に柔軟に対応することができる能力

## Design for Failure
障害が発⽣したとしても、システム全体が動き続けるように設計する

# Webシステムの可用性/スケーラビリティを高める方
## マルチAZ
一つのアベイラビリティゾーンしか使用していない場合単⼀障害点となっている
別のアベイラビリティゾーンを作成することで、片方のアベイラビリティゾーンが障害で動かなくなっても、もう片方で動くようになる
RDSはプライマリーとスタンバイの構成になり、フェイルオーバーで切り替わる仕組みになっている

## スケールアウトとスケールイン
### スケールアウト
EC2の起動台数を増やしていく

### スケールイン
EC2の起動台数を減らしていく

## EC2 Auto Scaling
希望容量と、現在の起動台数との差を監視
希望容量の値と⼀致するよう、インスタンスの台数を増減
希望容量の増減⽅法はさまざまな設定が可能（平均CPU使⽤率、時間指定予約等）

# デモ
## 可用性の対応
1. EC2インスタンスの冗長化<br>
インスタンス起動で、キーペアなしで続行を選択<br>
VPCは作成したもの、サブネットは別のパブリックサブネットを指定する<br>
2. ロードバランサーにインスタンスを登録する<br>
ターゲットグループで、先ほど作成したEC2を選択する<br>
3. RDSの冗長化<br>
データベースの変更を選択する<br>
可用性と耐久性でスタンバイインスタンスを作成するを選択<br>
変更のスケジュールはすぐに適用を選択<br>

## スケーラビリティの対応
1. AMIを作成<br>
EC2インスタンでイメージとテンプレートを選択し、イメージを作成を選択<br>
イメージ名とタグを入力<br>
2. 起動テンプレートを作成する<br>
起動テンプレート名を入力<br>
AMIで自分のAMIを選択し、自己所有を選択<br>
Amazonマシンイメージは作成したAMIを選択<br>
インスタンスタイプはt2.microを選択<br>
ネットワーク設定は既存のセキュリティグループを選択するにし、セキュリティグループはEC2用のものを選択する<br>
3. Auto Scalingグループを作成する<br>
名前を入力する<br>
起動テンプレートは先ほど作成したもの<br>
VPCはEC2を起動するものを選択<br>
サブネットはパブリックサブネットを選択する<br>
ロードバランシングは既存のロードバランサーにアタッチするを選択し、作成したターゲットグループを選択<br>
ヘルスチェックの猶予期間を10秒に変更<br>
その他の設定のCloudWatch内でグループメトリクスの収集を有効にするを選択<br>
希望するキャパシティを2、最小の希望する容量を1、最大の希望する容量を4<br>
自動スケーリングをターゲット追跡スケーリングポリシーを選択<br>
メトリクスタイプは平均CPU使用率を選択し、ターゲット値は50を選択<br>
インスタンスのウォームアップは10を入力<br>
タグを追加し、新しいインスタンスにタグ付けするを選択<br>






